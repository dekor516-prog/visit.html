<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>زيارة الزبون</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body {
  font-family: Arial;
  direction: rtl;
  background: #f2f2f2;
  padding: 20px;
}
.container {
  background: #fff;
  padding: 20px;
  max-width: 500px;
  margin: auto;
  border-radius: 10px;
}
input, select, button {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
}
button {
  background: #007bff;
  color: white;
  border: none;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container">
  <h2>نموذج زيارة الزبون</h2>

  <input type="text" id="phone" placeholder="رقم هاتف الزبون">
  <input type="text" id="location" placeholder="موقع الزبون">

  <select id="reason">
    <option value="">سبب الزيارة</option>
    <option>استحصال</option>
    <option>بيع</option>
    <option>عرض منتج</option>
  </select>

  <input type="file" id="image" accept="image/*">

  <button onclick="savePDF()">حفظ الزيارة PDF</button>
</div>

<script>
async function savePDF() {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF();

  let phone = document.getElementById("phone").value;
  let location = document.getElementById("location").value;
  let reason = document.getElementById("reason").value;
  let imageFile = document.getElementById("image").files[0];

  pdf.setFontSize(14);
  pdf.text("زيارة الزبون", 150, 20, {align:"right"});
  pdf.text("رقم الهاتف: " + phone, 150, 40, {align:"right"});
  pdf.text("موقع الزبون: " + location, 150, 55, {align:"right"});
  pdf.text("سبب الزيارة: " + reason, 150, 70, {align:"right"});

  if (imageFile) {
    const reader = new FileReader();
    reader.onload = function(e) {
      pdf.addImage(e.target.result, "JPEG", 20, 85, 160, 90);
      pdf.save("زيارة_زبون.pdf");
    };
    reader.readAsDataURL(imageFile);
  } else {
    pdf.save("زيارة_زبون.pdf");
  }
}
</script>

</body>
</html>
